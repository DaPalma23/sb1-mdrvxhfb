#!/bin/bash

# SCRIPT DE CAMUFLAGEM TOTAL - KALI LINUX (por Ricardo Palma)

echo "üîí Iniciando rotina de invisibilidade..."

# 1. SPOOFAR MAC ADDRESS
echo "‚û°Ô∏è  Spoofando MAC address..."
IFACE=$(ip -o link show | awk -F': ' '{print $2}' | grep -E 'eth0|enp|wlan0' | head -n 1)
sudo ifconfig $IFACE down
sudo macchanger -r $IFACE
sudo ifconfig $IFACE up

# 2. BLOQUEAR RESPOSTA A PING
echo "‚û°Ô∏è  Bloqueando resposta a ping (ICMP)..."
echo 1 | sudo tee /proc/sys/net/ipv4/icmp_echo_ignore_all > /dev/null

# 3. DESATIVAR IPV6
echo "‚û°Ô∏è  Desativando IPv6..."
sudo sysctl -w net.ipv6.conf.all.disable_ipv6=1 > /dev/null
sudo sysctl -w net.ipv6.conf.default.disable_ipv6=1 > /dev/null

# 4. INICIAR TOR
echo "‚û°Ô∏è  Iniciando servi√ßo Tor..."
sudo systemctl start tor

# 5. ATIVAR FIREWALL
echo "‚û°Ô∏è  Ativando firewall com regras seguras..."
sudo ufw --force enable
sudo ufw default deny incoming
sudo ufw default allow outgoing

# 6. TESTAR IP COM TOR (proxychains)
echo "‚û°Ô∏è  Testando conex√£o via Tor..."
proxychains curl -s https://check.torproject.org | grep -q "Congratulations"
if [ $? -eq 0 ]; then
    echo "‚úÖ  Conectado √† rede Tor com sucesso!"
else
    echo "‚ùå  Tor N√ÉO est√° roteando corretamente! Verifique proxychains.conf"
fi

echo "üéØ Pronto para atuar em seguran√ßa, Ricardo. Boa sorte!"